<ion-view>
    <ion-content ng-init="getPosts()" >
        <div class="list card zeromargin" ng-repeat="post in posts">
            <div class="item item-avatar">
            <img ng-src="{{ post.user.profileImageSmall }}">
            <h2 style="margin-top: 8px;">{{ post.user.username }}</h2>
            <button class="button button-outline button-positive button-small item-pull-right">
                Follow
            </button>
            </div>

            <div class="item item-image">
                <img ng-src="{{post.image}}">
            </div>

            <div class="item">
            <button class="icon button button-icon ion-ios-heart-outline" ng-click="like({{post.id}}, {{activeuser.id}})"></button>
            <button class="icon button button-icon ion-ios-chatbubble-outline" ng-click="commentField = !commentField"></button>
            <button class="icon button button-icon icon ion-ios-redo-outline"></button>
            <p>
                <i class="icon ion-ios-heart"></i> {{post.likes.length}} likes
            </p>
            <div>
                <p>
                    <b>{{post.user.username}}</b> {{post.caption}}
                    <!-- {{activeuser.id}} {{activeuser.username}} {{post.id}} -->
                </p>
                <p ng-repeat="c in post.comments">
                    <b>{{c.User.username}}</b> {{c.comment}}
                    <!-- {{c.User}} {{c}} -->
                </p>
                <div ng-show="commentField">
                    <b>{{activeuser.username}}</b> <input ng-model="commentScope.comment" placeholder="Comment here..."><button class="icon button button-icon ion-android-send" ng-click="addComment({{post.id}}, {{activeuser.id}}, '{{activeuser.username}}')"></button>
                </div>
            </div>
            </div>
        </div>
    </ion-content>
</ion-view>
